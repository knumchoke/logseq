- SOAP Message Structure
	- SOAP (Simple Object Access Protocol) เป็นโปรโตคอลมาตรฐานสำหรับการแลกเปลี่ยนข้อมูลแบบ XML ผ่านเครือข่าย, โดยเฉพาะในบริบทของเว็บเซอร์วิส. โครงสร้างข้อความ SOAP มีส่วนประกอบหลักดังต่อไปนี้:
		- **SOAP Envelope**
			- **Envelope** เป็นรูทเอเลเมนต์ (root element) ในข้อความ SOAP และเป็นส่วนที่บรรจุทั้งหมดของข้อความ. มันกำหนดเป็นกรอบของข้อมูลที่จะส่งหรือรับ.
		- **SOAP Header (Optional)**
			- **Header** เป็นส่วนที่ไม่จำเป็นต้องมี แต่สามารถใช้เพื่อประกอบด้วยข้อมูลที่เกี่ยวกับคุณสมบัติหรือการตั้งค่าที่เฉพาะเจาะจงของข้อความ. เช่น, ข้อมูลเกี่ยวกับการรับรองความถูกต้อง, การทำธุรกรรม, การติดตาม, หรือความปลอดภัย.
		- **SOAP Body (Mandatory)**
			- **Body** เป็นส่วนที่จำเป็นของข้อความ SOAP และบรรจุข้อมูลหลักที่จำเป็นสำหรับการเรียกใช้เว็บเซอร์วิส. ข้อมูลนี้ประกอบด้วยรายละเอียดของการเรียกใช้งาน, รวมถึงพารามิเตอร์และค่าต่างๆ ที่จำเป็นสำหรับการประมวลผล.
		- **SOAP Fault (Optional)**
			- **Fault** เป็นส่วนที่สามารถอยู่ในส่วนของ Body และใช้สำหรับการสื่อสารข้อผิดพลาด. มันประกอบด้วยรายละเอียดของข้อผิดพลาดที่เกิดขึ้นระหว่างการประมวลผลข้อความ, ซึ่งอาจรวมถึงรหัสข้อผิดพลาด, ข้อความอธิบาย, และข้อมูลอื่นๆ ที่เกี่ยวข้อง.
		- **อื่นๆ (Attachments)**
			- บางครั้ง, SOAP ยังสามารถมีส่วนประกอบเสริมอื่นๆ เช่น **attachments**, ซึ่งใช้สำหรับการส่งข้อมูลที่ไม่เหมาะสมหรือไม่สามารถจัดรูปแบบเป็น XML ได้.
	- โครงสร้างข้อความ SOAP นี้ออกแบบมาเพื่อให้มีความยืดหยุ่นและสามารถรองรับการแลกเปลี่ยนข้อมูลที่หลากหลายในบริบทของเว็บเซอร์วิส. แม้ว่าโครงสร้างของมันอาจดูซับซ้อนเมื่อเทียบกับโปรโตคอลอื่นๆ เช่น REST, แต่ความสามารถในการจัดการข้อมูลและคุณสมบัติที่หลากหลายทำให้ SOAP เป็นทางเลือกที่ดีสำหรับสถานการณ์ที่ต้องการความปลอดภัยสูงและการจัดการข้อมูลที่ซับซ้อน.
- SOAP Message Transmission
	- การส่งข้อความ SOAP (Simple Object Access Protocol) เป็นกระบวนการที่ข้อความแบบมาตรฐานที่มีข้อมูลในรูปแบบ XML ถูกส่งผ่านเครือข่ายจากไคลเอนต์ไปยังเซิร์ฟเวอร์เว็บเซอร์วิส, และในทางกลับกัน. นี่คือขั้นตอนหลักๆ ในการส่งข้อความ SOAP:
		- **การสร้างข้อความ SOAP**
			- การส่งข้อความ SOAP เริ่มต้นจาก **ไคลเอนต์** ที่สร้างข้อความ SOAP. ข้อความนี้ประกอบด้วยส่วน 'Envelope', ซึ่งอาจมี 'Header' (ไม่จำเป็น) และ 'Body' (จำเป็น). 'Body' ประกอบด้วยรายละเอียดเกี่ยวกับการเรียกใช้เว็บเซอร์วิส, รวมถึงพารามิเตอร์ที่จำเป็น.
		- **การเพิ่มความปลอดภัย (ถ้าจำเป็น)**
			- ข้อความอาจรวมถึงข้อมูลในส่วน 'Header' เพื่อเพิ่มความปลอดภัย, เช่น การยืนยันตัวตนหรือการเข้ารหัสข้อมูล.
		- **การส่งผ่านเครือข่าย**
			- ข้อความ SOAP จะถูกส่งผ่านเครือข่าย, โดยทั่วไปผ่าน HTTP/HTTPS. โปรโตคอลการส่งข้อมูลเหล่านี้ให้ความยืดหยุ่นและความสามารถในการผ่านไฟร์วอลล์.
		- **การรับและประมวลผลที่เซิร์ฟเวอร์**
			- เมื่อเซิร์ฟเวอร์เว็บเซอร์วิส **รับข้อความ SOAP**, มันจะประมวลผลข้อมูลในส่วน 'Body' เพื่อดำเนินการตามคำขอที่ได้รับ.
			- หากมีการตรวจสอบความปลอดภัยหรือการยืนยันตัวตน, จะมีการประมวลผลข้อมูลในส่วน 'Header' ก่อนดำเนินการใดๆ.
		- **การสร้างและส่งคำตอบ**
			- หลังจากประมวลผลคำขอ, เซิร์ฟเวอร์จะสร้าง **ข้อความ SOAP ของคำตอบ** และส่งกลับไปยังไคลเอนต์. ข้อความคำตอบนี้ก็จะประกอบด้วย 'Envelope' และ 'Body' ซึ่งมีข้อมูลที่เกี่ยวข้องกับผลลัพธ์ของคำขอ.
		- **การรับและประมวลผลข้อความคำตอบที่ไคลเอนต์**
			- เมื่อไคลเอนต์ **รับข้อความคำตอบ**, ข้อมูลในส่วน 'Body' จะถูกประมวลผลเพื่อดูผลลัพธ์หรือข้อมูลตอบกลับ.
	- ข้อสังเกต
		- ในกรณีที่เกิดข้อผิดพลาด, ส่วน 'Fault' ใน 'Body' ของข้อความ SOAP จะถูกใช้เพื่อสื่อสารรายละเอียดของข้อผิดพลาด.
		- กระบวนการส่งข้อความ SOAP นี้เป็นมาตรฐานและเป็นที่ยอมรับในการสื่อสารระหว่างเว็บเซอร์วิสและไคลเอนต์, โดยเฉพาะในสภาพแวดล้อมที่ต้องการความปลอดภัยและการจัดการข้อมูลที่ซับซ้อน.
- SOAP Request and Response
	- SOAP Request Message สำหรับการเรียกใช้งานเว็บเซอร์วิสสามารถเป็นได้ดังนี้:
	  ```xml
	  <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
	    <soap:Body>
	        <m:GetCustomerDetails xmlns:m="http://www.example.org/customer">
	            <m:CustomerId>12345</m:CustomerId>
	        </m:GetCustomerDetails>
	    </soap:Body>
	  </soap:Envelope>
	  ```
		- อธิบายส่วนประกอบ:
			- **soap:Envelope**: เป็นรูทเอเลเมนต์ของข้อความ SOAP และบรรจุทั้งหมดของข้อความ.
			- **soap:Body**: บรรจุข้อมูลหลักของข้อความ SOAP.
				- **m:GetCustomerDetails**: เป็นเอเลเมนต์ที่กำหนดการเรียกใช้งานเฉพาะเจาะจงสำหรับการร้องขอข้อมูลลูกค้า.
				- **m:CustomerId**: ระบุ ID ของลูกค้าที่ต้องการดึงข้อมูล.
		- การใช้งาน:
			- ตัวอย่างนี้แสดงการส่ง SOAP Request เพื่อร้องขอข้อมูลลูกค้าจากเว็บเซอร์วิส.
			- การร้องขอนี้ทำผ่านการระบุ ID ของลูกค้าในเอเลเมนต์ `m:GetCustomerDetails`.
			- การสื่อสารนี้ส่งผ่านเครือข่ายโดยปกติผ่าน HTTP/HTTPS ไปยังเว็บเซอร์วิสที่เกี่ยวข้อง.
		- SOAP Request Message นี้เป็นตัวอย่างของการใช้ SOAP ในรูปแบบที่ง่ายและตรงไปตรงมาสำหรับการร้องขอข้อมูลจากเว็บเซอร์วิส.
	- SOAP Response Message ที่สอดคล้องกับ SOAP Request ในตัวอย่างก่อนหน้าสำหรับการร้องขอข้อมูลลูกค้า:
	  ```xml
	  <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
	    <soap:Body>
	        <m:GetCustomerDetailsResponse xmlns:m="http://www.example.org/customer">
	            <m:CustomerDetails>
	                <m:CustomerId>12345</m:CustomerId>
	                <m:Name>John Doe</m:Name>
	                <m:Email>john.doe@example.com</m:Email>
	                <m:PhoneNumber>123-456-7890</m:PhoneNumber>
	            </m:CustomerDetails>
	        </m:GetCustomerDetailsResponse>
	    </soap:Body>
	  </soap:Envelope>
	  ```
	- อธิบายส่วนประกอบ:
		- **soap:Envelope**: เป็นรูทเอเลเมนต์ของข้อความ SOAP.
		- **soap:Body**: บรรจุข้อมูลหลักของข้อความ SOAP.
			- **m:GetCustomerDetailsResponse**: เป็นเอเลเมนต์ที่ระบุการตอบกลับสำหรับคำขอ `GetCustomerDetails`.
			- **m:CustomerDetails**: บรรจุรายละเอียดของลูกค้าที่ร้องขอ.
				- **m:CustomerId**: ID ของลูกค้า.
				- **m:Name**: ชื่อของลูกค้า.
				- **m:Email**: อีเมลของลูกค้า.
				- **m:PhoneNumber**: เบอร์โทรศัพท์ของลูกค้า.
	- การใช้งาน:
		- ตัวอย่างนี้แสดงการตอบกลับจากเว็บเซอร์วิสหลังจากประมวลผลคำขอ `GetCustomerDetails`.
		- การตอบกลับนี้มีรายละเอียดข้อมูลของลูกค้าที่ตรงกับ ID ที่ถูกร้องขอ.
		- ข้อมูลลูกค้าที่ระบุไว้ประกอบด้วยชื่อ, อีเมล, และเบอร์โทรศัพท์.
	- SOAP Response Message นี้ให้ตัวอย่างของการส่งข้อมูลตอบกลับที่เกี่ยวข้องกับคำขอเฉพาะจากไคลเอนต์.